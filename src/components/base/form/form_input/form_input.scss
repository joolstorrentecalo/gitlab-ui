.gl-form-input,
.gl-form-input.form-control {
  @include gl-font-regular;
  @apply gl-text-base;
  @apply gl-leading-normal;
  @apply gl-p-3;
  @include gl-h-auto;
  @include form-control-focus($ignore-warning: true);
  appearance: none;
  align-content: center;
  background: var(--gl-control-background-color-default);
  color: var(--gl-text-color-default);
  border: $gl-border-size-1 solid var(--gl-control-border-color-default);
  @include gl-prefers-reduced-motion-transition;
  transition: box-shadow $gl-transition-duration-medium $gl-easing-out-cubic,
              border-color $gl-transition-duration-medium $gl-easing-out-cubic;

  &:hover {
    border-color: var(--gl-control-border-color-hover);
  }

  &:not(textarea) {
    @include gl-py-0;
    height: $gl-component-height-medium;
  }

  &:read-only,
  &:not(:disabled):not(.form-control-plaintext):not([type='color']):read-only {
    background: var(--gl-control-background-color-readonly);
    border-width: 0;
  }

  &:disabled {
    @include gl-cursor-not-allowed;
    background: var(--gl-control-background-color-disabled);
    box-shadow: inset 0 0 0 $gl-border-size-1 var(--gl-control-border-color-disabled);
    color: var(--gl-text-color-disabled);
  }

  &:not(.form-control-plaintext):focus {
    background: var(--gl-control-background-color-default);
    color: var(--gl-text-color-default);
  }

  &:not(:disabled):focus {
    @include gl-focus;
    border-color: var(--gl-control-border-color-focus);
  }

  &.is-invalid {
    border-color: var(--gl-control-border-color-error);
  }

  &::placeholder {
    color: var(--gl-control-placeholder-color);
  }
}

@each $name, $size in $gl-form-input-sizes {
  .gl-form-input-#{$name} {
    max-width: $size;
  }

  @each $breakpointName, $breakpointSize in $gl-form-input-sizes {
    @if $breakpointName != xs {
      .gl-#{$breakpointName}-form-input-#{$name} {
        @include gl-media-breakpoint-up($breakpointName) {
          max-width: $size;
        }
      }
    }
  }
}

.input-group {
  .gl-form-input,
  .gl-form-input.form-control {
    @include gl-h-auto;
  }
}
