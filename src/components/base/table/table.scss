table.gl-table {
  background-color: var(--gl-color-alpha-0);
  color: var(--gl-text-color-default);

  tr {
    th,
    td {
      @apply gl-border-b-solid;
      border-color: var(--gl-border-color-default);
      @apply gl-border-b-1;
      @include gl-p-5;
      @include gl-bg-transparent;
      @include gl-line-height-normal;
      @include gl-font-base;
      @include gl-vertical-align-top;
    }

    th {
      @include gl-font-weight-bold;
      color: var(--gl-text-color-heading);

      &.gl-text-right > div {
        flex-direction: row-reverse;

        div.gl-ml-2 {
          @include gl-ml-0;
          @include gl-mr-2;
        }
      }

      [name='sort-icon'] {
        user-select: none;
        color: var(--gl-table-sorting-icon-color);
      }
    }

    td {
      color: var(--gl-text-color-default);
    }

    &:focus-visible {
      @include gl-focus;
      position: relative;
      z-index: 1;
    }
  }

  // Sticky header
  &--sticky-header thead tr {
    position: sticky;
    top: -1px;
    background-color: var(--gl-background-color-default);
    box-shadow: inset 0 -1px 0 var(--gl-border-color-default);
  }

  .table-primary,
  .table-primary:hover {
    background-color: var(--gl-feedback-info-background-color);

    > td {
      background-color: var(--gl-feedback-info-background-color);
    }
  }

  caption {
    @include gl-pt-2;
    color: var(--gl-text-color-subtle);
  }

  @mixin gl-tmp-stacked-override {
    tbody > tr {
      &::after {
        content: '';
        @include gl-h-6;
        @include gl-w-full;
        @include gl-display-block;
      }

      > td[data-label] {
        @apply gl-border-l-1;
        @apply gl-border-r-1;
        @apply gl-border-l-solid;
        @apply gl-border-r-solid;

        &::before {
          @include gl-text-left;
        }

        &:first-child {
          @apply gl-border-t-solid;
          @apply gl-border-t-1;
        }

        &:not(:first-child) {
          @apply gl-border-t-0;
        }
      }

      div {
        @include gl-text-right;
        @include gl-overflow-wrap-break;
      }
    }
  }

  $stacked-table-breakpoints: (
    'sm': 'xs',
    'md': 'sm',
    'lg': 'md',
    'xl': 'lg',
  );

  &.b-table {
    &.b-table-stacked {
      @include gl-tmp-stacked-override();
    }

    @each $class, $mq in $stacked-table-breakpoints {
      &.b-table-stacked-#{$class} {
        @include media-breakpoint-down(#{$mq}) {
          @include gl-tmp-stacked-override();
        }
      }
    }
  }

  &.table-hover tbody tr:hover,
  &.table-hover td.table-secondary:hover {
    background-color: var(--gl-table-row-background-color-hover);
  }

  thead th:hover {
    background-color: transparent !important;

    [name='sort-icon'] {
      display: flex !important;
    }
  }
}

.table.b-table > thead > tr > th,
.table.b-table > tfoot > tr > th {
  background-image: none !important;
}

.table.b-table > thead > tr > [aria-sort]:not(.b-table-sort-icon-left),
.table.b-table > tfoot > tr > [aria-sort]:not(.b-table-sort-icon-left) {
  padding-right: 1rem;
}
