/*
 * Segmented-control-specific utilities
 */

@mixin gl-btn-gl-segmented-button-focus($color) {
  box-shadow: $focus-ring, inset 0 0 0 $gl-border-size-1 $color;
}

.btn-group.gl-segmented-control {
  .btn:not(:first-child),
  .btn:not(:last-child) {
    &.active,
    &.focus,
    &:hover:not(.disabled) {
      @apply gl-rounded-base;
    }
  }
}

.gl-segmented-control {
  label:not(.disabled) {
    @include gl-cursor-pointer;
  }

  .btn-gl-segmented-button {
    @include gl-font-base;
    @include gl-line-height-normal;
    @include gl-text-gray-900;
    @include gl-fill-current-color;
    @include gl-bg-gray-10;
    border-color: $gray-100;

    &:first-child:not(:hover, :focus, :active, .active) {
      border-right-color: transparent;
    }

    &:last-child:not(:hover, :focus, :active, .active) {
      border-left-color: transparent;
    }

    &:hover {
      @include gl-inset-border-1-gray-400;
      @include gl-bg-gray-50;
      border-color: $gray-400;
    }

    &.focus {
      @include gl-z-index-1;
      @include gl-btn-gl-segmented-button-focus($gray-400);
      @include gl-bg-gray-50;
    }

    &.active {
      @include gl-z-index-2;
      @include gl-bg-white;
      @include gl-inset-border-1-gray-300;
      border-color: $gray-300;

      &:hover {
        @include gl-bg-gray-50;
        @include gl-inset-border-1-gray-400;
        border-color: $gray-400;
      }

      &.focus,
      &.focus:hover {
        @include gl-btn-gl-segmented-button-focus($gray-400);
        @include gl-bg-gray-50;
      }
    }

    &:focus-within {
      @include gl-focus;
    }

    &.disabled,
    &[disabled],
    &.disabled:hover,
    &[disabled]:hover {
      @include gl-text-gray-400;
      @include gl-z-index-0;
      @include gl-cursor-not-allowed;
      border-color: $gray-200;
      box-shadow: none;
    }
  }
}
